Logging = {
    System = "/var/log/Pancake2/system.log";
    Request = "/var/log/Pancake2/request.log";
    Error = "/var/log/Pancake2/error.log";
};

Workers = {
    Amount = 0;
    User = "www-data";
    Group = "www-data";
    ConcurrencyLimit = 1000;
};

Authentication = ({
    Name = "test";
    Backend = "File";

    File = {
        Path = "/etc/Pancake2/test.passwd";
        Encryption = "Plain";
    }
});

AuthenticationConfiguration = "test";

ServerArchitecture = "LinuxPoll";

NetworkBuffering = {
    //Min = 20480;
    Max = 1048576;
};

FastCGIClients = ({
    Name = "php-fpm";
    KeepAlive = false;
    Interface = {
        Network = "unix";
        Address = "/run/php/php7.4-fpm.socket";
    }
}, {
    Name = "hhvm";
    KeepAlive = true;
    Interface = {
        Network = "unix";
        Address = "/run/hhvm.socket";
    }
});

HTTP = {
    Interfaces = (/*{
        Network = "ip4";
        Backlog = 100;
        Port = 443;
        Address = "127.0.0.1";

        NetworkLayer = "OpenSSL";
        OpenSSL = {
            ApplicationProtocol = "HTTPS";

            Contexts = ({
                //Protocols = ("SSLv3", "TLSv1", "TLSv1.1", "TLSv1.2");
                Ciphers = "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
                CertificateChain = "/etc/ssl/cert/startcom/example.com.crt";
                PrivateKey = "/etc/ssl/private/example.com.key";

                Domains = ("example.com", "www.example.com");
                PreferServerCiphers = true;
                DiffieHellmanParameters = "/etc/Pancake2/dh.pem";
                EllipticCurve = "secp521r1";
            }, {
                //Protocols = ("SSLv3", "TLSv1", "TLSv1.1", "TLSv1.2");
                Ciphers = "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS";
                CertificateChain = "/etc/ssl/cert/startcom/example.org.crt";
                PrivateKey = "/etc/ssl/private/example.org.key";

                Domains = ("example.org", "www.example.org");
            });
        };
    }, {
        Network = "ip4";
        Backlog = 100;
        Address = "1.2.3.4";
        Port = 80;
    }, */{
        Network = "ip4";
        Backlog = 100;
        Address = "127.0.0.1";
        Port = 8080;
    });

    RequestTimeout = 999;
    KeepAliveTimeout = 10;
    ServerHeader = true;

    VirtualHosts = ({
        Hosts = ("127.0.0.1", "example.com", "www.example.com");
        Default = true;
        DocumentRoot = "/var/www";
        ContentServeBackends = ("FastCGI", "Static");
        //OutputFilters = ("Deflate");
        ParserHooks = ("BasicAuthentication", "Rewrite");

        Logging = {
            Request = "/var/log/Pancake2/MyVirtualHost.log";
        }

        HTTPAuthenticationRealm = "MyRealm";

        Deflate = {
            Level = 9;
            WindowBits = -15;
            MemoryLevel = 9;
        }

        Rewrite = ({
            $MIMEType == "text/x-php";
            FastCGIClient = "hhvm";
        }/*, {
            $HTTPS == true;
            $HTTPAnswerCode = 555;
            ThrowException();
        }*/);
    });
};

MIME = {
    Default = "application/octet-stream";
    Types = (
        {Extension = "png"; Type = "image/png";},
        {Extension = "exe"; Type = "application/octet-stream";},
        {Extension = "html"; Type = "text/html";},
        {Extension = "jpg"; Type = "image/jpeg";},
        {Extension = "php"; Type = "text/x-php";},
        {Extension = "txt"; Type = "text/plain";},
        {Extension = "css"; Type = "text/css";},
        {Extension = "gif"; Type = "image/gif";},
        {Extension = "jpeg"; Type = "image/jpeg";},
        {Extension = "js"; Type = "application/javascript";},
    );
};
